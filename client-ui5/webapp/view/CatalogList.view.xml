<mvc:View
    controllerName="invoice.app.controller.CatalogList"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:layout="sap.ui.layout">

    <Page title="{i18n>catalog}">
        <headerContent>
            <Button icon="sap-icon://add" text="{i18n>createItem}" press="onCreateProduct" type="Emphasized"/>
        </headerContent>

        <content>
            <Panel expandable="true" expanded="true" headerText="{i18n>filters}" width="auto" class="sapUiSmallMargin">
                <content>
                    <layout:Grid defaultSpan="L2 M4 S12" vSpacing="1">
                        <VBox>
                            <layoutData>
                                <layout:GridData span="L3 M6 S12"/>
                            </layoutData>
                            <Label text="{i18n>search}"/>
                            <SearchField id="searchFilter" placeholder="{i18n>searchPlaceholder}" search="onSearch"/>
                        </VBox>
                        <VBox>
                            <layoutData>
                                <layout:GridData span="L2 M6 S12"/>
                            </layoutData>
                            <Label text="SKU"/>
                            <Input id="skuFilter" submit="onSearch"/>
                        </VBox>
                        <VBox>
                            <layoutData>
                                <layout:GridData span="L3 M6 S12"/>
                            </layoutData>
                            <Label text="{i18n>description}"/>
                            <Input id="nameFilter" submit="onSearch"/>
                        </VBox>
                        <VBox>
                            <layoutData>
                                <layout:GridData span="L2 M6 S12"/>
                            </layoutData>
                            <Label text="{i18n>status}"/>
                            <Select id="statusFilter" selectedKey="" change="onSearch" width="100%">
                                <items>
                                    <core:Item key="" text="{i18n>allStatuses}"/>
                                    <core:Item key="true" text="Active"/>
                                    <core:Item key="false" text="Inactive"/>
                                </items>
                            </Select>
                        </VBox>
                        <VBox justifyContent="End">
                            <layoutData>
                                <layout:GridData span="L2 M12 S12"/>
                            </layoutData>
                            <Label text=""/>
                            <Button text="Go" type="Emphasized" press="onSearch" width="100%"/>
                        </VBox>
                    </layout:Grid>
                </content>
            </Panel>

            <Table 
                id="catalogTable"
                items="{catalog>/products}"
                mode="SingleSelectMaster"
                itemPress="onProductPress">
                <columns>
                    <Column><Text text="SKU"/></Column>
                    <Column><Text text="{i18n>description}"/></Column>
                    <Column minScreenWidth="Tablet" demandPopin="true"><Text text="{i18n>type}"/></Column>
                    <Column hAlign="End"><Text text="{i18n>price}"/></Column>
                    <Column hAlign="End"><Text text="{i18n>tax}"/></Column>
                    <Column hAlign="Center"><Text text="{i18n>status}"/></Column>
                </columns>
                <items>
                    <ColumnListItem type="Navigation">
                        <cells>
                            <ObjectIdentifier title="{catalog>sku}"/>
                            <Text text="{catalog>nombre}"/>
                            <Text text="{catalog>tipo}"/>
                            <ObjectNumber number="{catalog>precio_base}" unit="EUR"/>
                            <Text text="{catalog>impuesto_porcentaje}%"/>
                            <ObjectStatus 
                                text="{= ${catalog>activo} ? 'Active' : 'Inactive' }" 
                                state="{= ${catalog>activo} ? 'Success' : 'Error' }"/>
                        </cells>
                    </ColumnListItem>
                </items>
            </Table>
        </content>
    </Page>
</mvc:View>
