<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core">
<Dialog title="{newUser>/dialogTitle}" contentWidth="800px">
        <content>
            <f:SimpleForm 
                editable="true"
                layout="ResponsiveGridLayout"
                labelSpanXL="12" labelSpanL="12" labelSpanM="12" labelSpanS="12"
                adjustLabelSpan="false"
                emptySpanXL="0" emptySpanL="0" emptySpanM="0" emptySpanS="0"
                columnsXL="3" columnsL="2" columnsM="1"
                singleContainerFullSize="false">
                <f:content>
                    <!-- Column 1: Account and Part of Personal -->
                    <core:Title text="{i18n>accountInfo}" icon="sap-icon://account"/>
                    <Label text="{i18n>email}" required="true"/>
                    <Input value="{newUser>/email}" type="Email" placeholder="example@domain.com" editable="{= !${newUser>/isViewMode}}"/>
                    
                    <Label text="{i18n>role}" required="true"/>
                    <Select selectedKey="{newUser>/role_id}" forceSelection="false" width="100%" items="{/roles}" enabled="{= !${newUser>/isViewMode}}">
                        <core:Item key="{key}" text="{text}"/>
                    </Select>

                    <!-- Column 2: Personal Info -->
                    <core:Title text="{i18n>personalInfo}"/>
                    <Label text="{i18n>firstName}" required="true"/>
                    <Input value="{newUser>/firstName}" editable="{= !${newUser>/isViewMode}}"/>
                    
                    <Label text="{i18n>lastName}" required="true"/>
                    <Input value="{newUser>/lastName}" editable="{= !${newUser>/isViewMode}}"/>

                    <Label text="{i18n>nif}" required="true"/>
                    <Input value="{newUser>/nif}" editable="{= !${newUser>/isViewMode}}"/>
                    
                    <Label text="{i18n>dateOfBirth}"/>
                    <DatePicker value="{newUser>/dateOfBirth}" valueFormat="yyyy-MM-dd" displayFormat="long" editable="{= !${newUser>/isViewMode}}"/>
                    
                    <Label text="{i18n>bio}"/>
                    <TextArea value="{newUser>/bio}" rows="2" editable="{= !${newUser>/isViewMode}}" placeholder="Breve descripciÃ³n..."/>

                    <!-- Column 3: Contact Info -->
                    <core:Title text="{i18n>contactInfo}"/>
                    <Label text="{i18n>phone}"/>
                    <Input value="{newUser>/phone}" editable="{= !${newUser>/isViewMode}}"/>

                    <Label text="{i18n>addressLine1}"/>
                    <Input value="{newUser>/addressLine1}" editable="{= !${newUser>/isViewMode}}"/>
                    
                    <Label text="{i18n>addressLine2}"/>
                    <Input value="{newUser>/addressLine2}" editable="{= !${newUser>/isViewMode}}"/>
                    
                    <Label text="{i18n>city}"/>
                    <Input value="{newUser>/city}" editable="{= !${newUser>/isViewMode}}"/>
                    
                    <Label text="{i18n>stateProvince}"/>
                    <Input value="{newUser>/stateProvince}" editable="{= !${newUser>/isViewMode}}"/>
                    
                    <Label text="{i18n>postalCode}"/>
                    <Input value="{newUser>/postalCode}" editable="{= !${newUser>/isViewMode}}"/>
                    
                    <Label text="{i18n>country}"/>
                    <Input value="{newUser>/country}" editable="{= !${newUser>/isViewMode}}"/>
                    
                </f:content>
            </f:SimpleForm>
        </content>
        <beginButton>
            <Button text="{i18n>save}" type="Emphasized" press="onSaveUser" visible="{= !${newUser>/isViewMode}}"/>
        </beginButton>
        <endButton>
            <Button text="{i18n>cancel}" press="onCancelUser"/>
        </endButton>
    </Dialog>
</core:FragmentDefinition>
